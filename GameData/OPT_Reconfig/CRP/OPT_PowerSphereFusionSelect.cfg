@PART[opt_powersphere1a|opt_powersphere1a2]:NEEDS[CommunityResourcePack,!Pathfinder]
{
	@description ^= :$: <br><color="green">Fuel cell accepts different fuels.</color>
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = FuelSelect
		switcherDescription = Fuel 
		switcherDescriptionPlural = Fuel Selections
		switchInFlight = True
		SUBTYPE
		{
			name = LFO
			title = LFO
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorOxidizer
			descriptionSummary = LiquidFuel + Oxidizer
			descriptionDetail = <b>Inputs:</b> 0.045 LF/s + 0.055 OX/s <br><b>Outputs:</b> 150 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Super Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LiquidFuel
						Ratio = 0.045
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.055
					}
				}
			}
		}
		SUBTYPE
		{
			name = LF
			title = LF
			primaryColor = ResourceColorLiquidFuel
			secondaryColor = ResourceColorLiquidFuel
			descriptionSummary = LiquidFuel
			descriptionDetail = <b>Inputs:</b> 0.1 LF/s <br><b>Outputs:</b> 150 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Super Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LiquidFuel
						Ratio = 0.1
					}
				}
			}
		}
		SUBTYPE
		{
			name = MONO
			title = Mono
			primaryColor = ResourceColorMonoPropellant
			secondaryColor = ResourceColorMonoPropellant
			descriptionSummary = MonoPropellant
			descriptionDetail = <b>Inputs:</b> 0.15 Mono/s <br><b>Outputs:</b> 150 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Super Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = MonoPropellant
						Ratio = 0.15
					}
				}
			}
		}
		SUBTYPE
		{
			name = LH2O
			title = LH2O
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorOxidizer
			descriptionSummary = LqdHydrogen + Oxidizer
			descriptionDetail = <b>Inputs:</b> 0.15 LH2/s + 0.01 OX/s (36 OX/hr) <br><b>Outputs:</b> 150 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Super Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdHydrogen
						Ratio = 0.15
					}
					INPUT_RESOURCE
					{
						ResourceName = Oxidizer
						Ratio = 0.01
					}
				}
			}
		}
		SUBTYPE
		{
			name = LH2
			title = LH2
			primaryColor = ResourceColorLqdHydrogen
			secondaryColor = ResourceColorLqdHydrogen
			descriptionSummary = LqdHydrogen
			descriptionDetail = <b>Inputs:</b> 0.3 LH2/s <br><b>Outputs:</b> 150 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Super Cell
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdHydrogen
						Ratio = 0.3
					}
				}
			}
		}
	}
}

@PART[opt_powersphere1a2]:NEEDS[CommunityResourcePack,!Pathfinder]
{
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[FuelSelect]]
	{
		@SUBTYPE[LFO]
		{
			@descriptionDetail = <b>Inputs:</b> 0.18 LF/s + 0.22 OX/s <br><b>Outputs:</b> 600 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,*
					{
						@Ratio *= 4
					}
				}
			}
		}
		@SUBTYPE[LF]
		{
			@descriptionDetail = <b>Inputs:</b> 0.4 LF/s <br><b>Outputs:</b> 600 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,*
					{
						@Ratio *= 4
					}
				}
			}
		}
		@SUBTYPE[MONO]
		{
			@descriptionDetail = <b>Inputs:</b> 0.6 Mono/s <br><b>Outputs:</b> 600 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,*
					{
						@Ratio *= 4
					}
				}
			}
		}
		@SUBTYPE[LH2O]
		{
			@descriptionDetail = <b>Inputs:</b> 0.6 LH2/s + 0.04 OX/s <br><b>Outputs:</b> 600 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,*
					{
						@Ratio *= 4
					}
				}
			}
		}
		SUBTYPE[LH2]
		{
			@descriptionDetail = <b>Inputs:</b> 1.2 LH2/s <br><b>Outputs:</b> 600 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,*
					{
						@Ratio *= 4
					}
				}
			}
		}
	}
}

@PART[opt_powersphere1b|opt_powersphere2]:NEEDS[CommunityResourcePack,!Pathfinder]
{
	!RESOURCE[XenonGas] {}
	@description ^= :$: <br><color="green">Fusion reactor accepts different fuels.</color>
	@MODULE[ModuleResourceConverter],0
	{
		@INPUT_RESOURCE,0
		{
			@ResourceName = LqdHydrogen
			@Ratio = 0.000952717
		}
	}
	MODULE
	{
		name = ModuleB9PartSwitch
		moduleID = FusionFuelSelect
		switcherDescription = Fusion Fuel 
		switcherDescriptionPlural = Fusion Fuel Selections
		switchInFlight = True
		SUBTYPE:NEEDS[WarpPlugin]
		{
			name = Boron
			title = Boron
			primaryColor = White
			secondaryColor = BrownishGrey
			defaultSubtypePriority = 1
			descriptionDetail = <b>Inputs:</b> 0.59 Bo/day
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Boron
						Ratio = 2.7439E-05
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE
		{
			name = LqdHydrogen
			title = Liquid Hydrogen
			primaryColor = White
			secondaryColor = ResourceColorLqdHydrogen
			defaultSubtypePriority = 7
			descriptionDetail = <b>Inputs:</b> 3.43 LH2/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdHydrogen
						Ratio = 0.000952717
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE:NEEDS[FarFutureTechnologies|WarpPlugin]
		{
			name = LqdDeuterium
			title = Liquid Deuterium
			primaryColor = White
			secondaryColor = CloudyBlue
			defaultSubtypePriority = 2
			descriptionDetail = <b>Inputs:</b> 1.5 Du/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdDeuterium
						Ratio = 0.00041564
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE:NEEDS[FarFutureTechnologies|RationalResources|WarpPlugin]
		{
			name = LqdHe3
			title = Liquid Helium3
			primaryColor = White
			secondaryColor = CloudyBlue
			defaultSubtypePriority = 3
			descriptionDetail = <b>Inputs:</b> 4.12 He3/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdHe3
						Ratio = 0.001144068
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE:NEEDS[WarpPlugin]
		{
			name = LqdTritium
			title = Liquid Tritium
			primaryColor = White
			secondaryColor = CloudyBlue
			defaultSubtypePriority = 4
			descriptionDetail = <b>Inputs:</b> 0.76 Tr/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = LqdTritium
						Ratio = 0.000210938
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE:NEEDS[WarpPlugin|NearFuturePropulsion]
		{
			name = Lithium
			title = Lithium
			primaryColor = White
			secondaryColor = Cherry
			defaultSubtypePriority = 5
			descriptionDetail = <b>Inputs:</b> 0.46 Li/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Lithium
						Ratio = 0.000126404
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
		SUBTYPE:NEEDS[WarpPlugin]
		{
			name = Lithium6
			title = Lithium6
			primaryColor = White
			secondaryColor = Grey_Green
			defaultSubtypePriority = 6
			descriptionDetail = <b>Inputs:</b> 0.53 Li6/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 10.8 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 300 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			MODULE
			{
				IDENTIFIER
				{
					name = ModuleResourceConverter
					ConverterName = Polywell Fusion
				}
				DATA
				{
					INPUT_RESOURCE
					{
						ResourceName = Lithium6
						Ratio = 0.00014738
					}
					INPUT_RESOURCE:NEEDS[OPT_DarkGoo]
					{
						ResourceName = DarkGoo
						Ratio = 0.003
					}
				}
			}
		}
	}
}

@PART[opt_powersphere2]:NEEDS[CommunityResourcePack,!Pathfinder]
{
	@MODULE[ModuleResourceConverter],*
	{
		@INPUT_RESOURCE,0
		{
			@Ratio *= 18
		}
	}
	@MODULE[ModuleB9PartSwitch]:HAS[#moduleID[FusionFuelSelect]]
	{
		@SUBTYPE[Boron]
		{
			@descriptionDetail = <b>Inputs:</b> 10.62 Bo/day
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[LqdHydrogen]
		{
			@descriptionDetail = <b>Inputs:</b> 61.74 LH2/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[LqdDeuterium]
		{
			@descriptionDetail = <b>Inputs:</b> 27 Du/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[LqdHe3]
		{
			@descriptionDetail = <b>Inputs:</b> 74.16 He3/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[LqdTritium]
		{
			@descriptionDetail = <b>Inputs:</b> 13.68 Tr/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[Lithium]
		{
			@descriptionDetail = <b>Inputs:</b> 8.28 Li/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
		@SUBTYPE[Lithium6]
		{
			@descriptionDetail = <b>Inputs:</b> 9.54 Li6/hr
			@descriptionDetail:NEEDS[OPT_DarkGoo] ^= :$: + 36 Goo/hr
			@descriptionDetail ^= :$:<br><b>Outputs:</b> 5400 EC/s<br><color="orange">Please quicksave + quickload after applying.</color>
			@MODULE
			{
				@DATA
				{
					@INPUT_RESOURCE,0
					{
						@Ratio *= 18
					}
					@INPUT_RESOURCE:HAS[#ResourceName[DarkGoo]]
					{
						@Ratio = 0.01
					}
				}
			}
		}
	}
}